(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c9c272d2"],{"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("d3b7"),n("e6cf");function a(e,t,n,a,r,o,i){try{var s=e[o](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(a,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,c,"next",e)}function c(e){a(i,r,o,s,c,"throw",e)}s(void 0)}))}}},"5b19":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline",form:e.form},on:{submit:e.handleSubmit}},[n("a-row",{attrs:{gutter:48}},[n("a-col",{attrs:{md:6,sm:24}},[n("a-form-item",{attrs:{label:"社区搜索"}},[n("a-cascader",{directives:[{name:"decorator",rawName:"v-decorator",value:["city",{rules:[{required:!1,message:"请选择社区"}]}],expression:"[\n                'city',\n                {\n                  rules: [{ required: false, message: '请选择社区' }]\n                }\n              ]"}],attrs:{fieldNames:{label:"n",value:"v",children:"children"},options:e.city,loadData:e.loadData,changeOnSelect:"",placeholder:"请选择社区"},on:{change:e.onChange}})],1)],1),n("a-col",{directives:[{name:"show",rawName:"v-show",value:e.community.length>0,expression:"community.length>0"}],attrs:{md:4,sm:24}},[n("a-form-item",{attrs:{label:""}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!1,message:"请选择社区"}]}],expression:"[ 'id', {rules: [{ required: false, message: '请选择社区' }]}]"}],attrs:{allowClear:"",placeholder:"请选择社区"}},e._l(e.community,(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.communityName))])})),1)],1)],1),n("a-col",{attrs:{md:4,sm:24}},[n("span",{staticClass:"table-page-search-submitButtons"},[n("a-button",{attrs:{type:"primary",htmlType:"submit"}},[e._v("搜索")]),n("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.handleReset}},[e._v("重置")])],1)])],1)],1)],1),n("a-table",{attrs:{loading:e.loading,columns:e.columns,pagination:!1,rowKey:"id",dataSource:e.data,rowSelection:{type:"radio",selectedRowKeys:e.selectedRowKeys,onChange:this.onSelectChange}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t){return n("span",{},[[e._v(" "+e._s(t)+" ")]],2)}}])})],1)},r=[],o=(n("7db0"),n("d81d"),n("96cf"),n("1da1")),i=n("5530"),s=n("365c"),c=n("2f62"),l=[{title:"社区省市",key:"provinceName",dataIndex:"provinceName"},{title:"社区城市",key:"cityName",dataIndex:"cityName"},{title:"社区区县",key:"areaName",dataIndex:"areaName"},{title:"社区名称",key:"communityName",dataIndex:"communityName"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],u={current:1,defaultPageSize:5,total:0,pageSizeOptions:["5","10","50","100"],showSizeChanger:!1,showQuickJumper:!1},d={name:"CoordinateSet",components:{},data:function(){return{form:this.$form.createForm(this),selectedItems:[],configs:{},data:[],columns:l,pagination:u,selectedRowKeys:[],selectedRows:[],city:[],community:[],loading:!1}},computed:Object(i["a"])({},Object(c["c"])(["userInfo"])),created:function(){this.getList(),this.getAllAreas()},beforeCreate:function(){},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,n){if(console.log(n),!e){n.provinceId=n.city[0],n.cityId=n.city[1],n.areaId=n.city[2];var a=t.community.find((function(e){return e.id===n.id}));n.communityName=a.communityName,console.log(n),t.getList(n)}}))},onChange:function(e){3===e.length&&this.getByarea(e[2]),console.log(e)},loadData:function(e){var t=e[e.length-1];t.loading=!0,console.log(e)},onSelectChange:function(e,t){console.log(e),console.log(t),this.selectedRowKeys=e,this.selectedRows=t},handleTableChange:function(e){this.getList({pageIndex:e.current,pageSize:e.pageSize}),this.pagination.current=e.current,this.pagination.pageSize=e.pageSize},handleReset:function(){this.form.resetFields()},getAllAreas:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["db"])({});case 2:n=t.sent,a=n.result,r=n.httpCode,o=n.message,200===r?(i=JSON.parse(a.allAreas),e.city=i.p.map((function(e){var t={n:e.n,v:e.v,children:e.c.map((function(e){return{n:e.n,v:e.v,children:e.d}}))};return t}))):e.$message.error(o);case 7:case"end":return t.stop()}}),t)})))()},getByarea:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(e),n.next=3,Object(s["j"])({areaId:e});case 3:a=n.sent,r=a.result,o=a.httpCode,i=a.message,200===o?(t.community=r,console.log(r)):t.$message.error(i);case 8:case"end":return n.stop()}}),n)})))()},getList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,o,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,a=Object.assign({},{sunlightPersonnelId:t.userInfo.staffId},e),n.next=4,Object(s["m"])(a);case 4:r=n.sent,o=r.result,i=r.httpCode,c=r.message,200===i?(t.data=o.list,t.pagination.total=o.totalSize):t.$message.error(c),t.loading=!1;case 10:case"end":return n.stop()}}),n)})))()}}},m=d,g=n("2877"),h=Object(g["a"])(m,a,r,!1,null,null,null);t["default"]=h.exports}}]);