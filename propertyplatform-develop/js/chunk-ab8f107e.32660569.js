(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ab8f107e"],{"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("d3b7"),a("e6cf");function n(e,t,a,n,i,r,s){try{var c=e[r](s),o=c.value}catch(l){return void a(l)}c.done?t(o):Promise.resolve(o).then(n,i)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(i,r){var s=e.apply(t,a);function c(e){n(s,i,r,c,o,"next",e)}function o(e){n(s,i,r,c,o,"throw",e)}c(void 0)}))}}},"2c14":function(e,t,a){"use strict";var n=a("482a"),i=a.n(n);i.a},"482a":function(e,t,a){},ee6e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header-index-wide"},[a("a-card",{attrs:{bordered:!1,"body-style":{padding:"0"}}},[a("div",{staticClass:"salesCard"},[a("a-tabs",{attrs:{size:"large","tab-bar-style":{marginBottom:"24px",paddingLeft:"16px"}},on:{change:e.tabsChange},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},e._l(e.tabList,(function(t,n){return a("a-tab-pane",{key:t.type,attrs:{tab:t.name,index:n}},[a("a-row",{directives:[{name:"show",rawName:"v-show",value:3===e.activeKey,expression:"activeKey === 3"}]},[a("a-col",{attrs:{xl:24,lg:12,md:12,sm:24,xs:24}},[a("v-chart",{attrs:{forceFit:!0,height:e.height,data:e.data1,scale:e.scale1}},[a("v-tooltip"),a("v-axis"),a("v-bar",{attrs:{position:"time*数量"}})],1)],1)],1),a("a-row",{directives:[{name:"show",rawName:"v-show",value:1===e.activeKey||2===e.activeKey,expression:"activeKey === 1 || activeKey === 2"}]},[a("a-col",{attrs:{xl:8,lg:12,md:12,sm:24,xs:24}},[a("div",{staticClass:"rank",staticStyle:{padding:"50px 0 0 120px"}},[a("h3",{staticClass:"title"},[e._v("各项指标")]),a("ul",{staticClass:"list"},e._l(e.normList,(function(t,n){return a("li",{key:n},[a("span",[a("em",[e._v(e._s(t.item)+"：")]),a("a-tag",{attrs:{color:"#3a8dff"}},[e._v(e._s(t.count))])],1),a("span")])})),0)])]),a("a-col",{attrs:{xl:16,lg:12,md:12,sm:24,xs:24}},[a("div",[a("v-chart",{attrs:{forceFit:!0,padding:[15,20,15,20],height:e.height,data:e.data,scale:e.scale}},[a("v-tooltip",{attrs:{showTitle:!1,"data-key":"item*percent"}}),a("v-axis",{attrs:{title:{autoRotate:!0,text:"11111"}}}),a("v-legend",{attrs:{"data-key":"item",textStyle:{fontSize:"14"},position:"left-top",offsetX:80,offsetY:120}}),a("v-pie",{attrs:{position:"percent",color:e.color,vStyle:e.pieStyle,label:e.labelConfig}}),a("v-coord",{attrs:{type:"theta",radius:.75,innerRadius:.6}})],1)],1)])],1),a("a-row",{attrs:{gutter:24,type:"flex"}},[a("a-col",{attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("a-card",{style:{height:"100%"},attrs:{bordered:!1}},[a("a-range-picker",{style:{width:"256px"},attrs:{slot:"extra",value:e.date,format:"YYYY-MM-DD"},on:{change:e.onChangeTime},slot:"extra"}),a("a",{staticStyle:{"padding-left":"20px"},attrs:{slot:"extra"},on:{click:e.exportTable},slot:"extra"},[e._v("打印表格")]),a("div",{staticClass:"ant-table-wrapper"},[a("a-table",{attrs:{loading:e.loading,"row-key":"id",size:"small",columns:e.columns,dataSource:e.searchData,pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"staffName",fn:function(t,n){return a("span",{},[e._v(" "+e._s(n.beginTime+"-"+n.endTime)+" ")])}}],null,!0)})],1)],1)],1)],1)],1)})),1)],1)])],1)},i=[],r=(a("d81d"),a("96cf"),a("1da1")),s=a("c1df"),c=a.n(s),o=a("365c"),l=a("ac0d"),d=a("7104"),u=[{key:"createTime",dataIndex:"createTime",title:"时间",align:"center"},{key:"typeName",dataIndex:"typeName",title:"维修类型",align:"center"},{key:"stateName",dataIndex:"stateName",title:"处理进度",align:"center"},{key:"repairName",dataIndex:"repairName",title:"业主姓名",align:"center"},{key:"staffName",dataIndex:"staffName",title:"物业人员",align:"center"},{key:"content",dataIndex:"content",title:"详情",align:"center"}],p=[{key:"createTime",dataIndex:"createTime",title:"时间",align:"center"},{key:"typeName",dataIndex:"typeName",title:"跑腿类型",align:"center"},{key:"userName",dataIndex:"userName",title:"业主姓名",align:"center"},{key:"staffName",dataIndex:"staffName",title:"物业人员",align:"center"},{key:"content",dataIndex:"content",title:"详情",align:"center"}],m=[{key:"name",dataIndex:"name",title:"寄存名称",align:"center"},{key:"people",dataIndex:"people",title:"联系人",align:"center"},{key:"phone",dataIndex:"phone",title:"联系方式",align:"center"},{key:"staffName",dataIndex:"staffName",title:"托管时间",scopedSlots:{customRender:"staffName"},align:"center"}],f={current:1,defaultPageSize:5,total:100,pageSizeOptions:["5","10","50","100"],showSizeChanger:!0,showQuickJumper:!0},g=[{dataKey:"percent",min:0,formatter:".0%"}],h=["item",["#3a8dff","#3fc2c0","#4bc464","#f9cc36","#ec4d6b","#8d98b3","#e5cf0d","#97b552"]],x=[{name:"报修",type:1},{name:"跑腿",type:2},{name:"寄存",type:3}],y=c()().subtract(1,"months").format("YYYY-MM-DD"),b=c()().format("YYYY-MM-DD"),v={name:"Repair",mixins:[l["c"]],components:{},data:function(){return{loading:!0,repairColumns:u,errandsColumns:p,depositColumns:m,searchData:[],pagination:f,data:[],date:[c()(y,"YYYY-MM-DD"),c()(b,"YYYY-MM-DD")],scale:g,color:h,height:400,pieStyle:{stroke:"#fff",lineWidth:1},labelConfig:["percent",{formatter:function(e,t){return t.point.item+": "+e}}],payList:[],pieList:[],normList:[],activeKey:x[0].type,tabList:x,scale1:[{dataKey:"sales",tickInterval:20}],data1:[]}},computed:{columns:function(){switch(this.activeKey){case 1:return this.repairColumns;case 2:return this.errandsColumns;case 3:return this.depositColumns;default:return[]}}},created:function(){this.getStatistics(),this.getStatisticsPie()},methods:{exportTable:function(){this.exportStatistics()},exportStatistics:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,i,r,s,o,l,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.pagination,n=a.current,i=a.defaultPageSize,r={pageIndex:n,pageSize:i,beginDate:c()(e.date[0]).format("YYYY-MM-DD"),endDate:c()(e.date[1]).format("YYYY-MM-DD")},1!==e.activeKey){t.next=8;break}return t.next=5,e.$exportExcel("propertyStatistics/repairDetailToExcel",r);case 5:t.t0=t.sent,t.next=18;break;case 8:if(2!==e.activeKey){t.next=14;break}return t.next=11,e.$exportExcel("propertyStatistics/substituteDetailToExcel",r);case 11:t.t1=t.sent,t.next=17;break;case 14:return t.next=16,e.$exportExcel("propertyStatistics/trusteeshipDetailToExcel",r);case 16:t.t1=t.sent;case 17:t.t0=t.t1;case 18:s=t.t0,o=s.result,l=s.httpCode,d=s.message,200===l?(console.log(o),window.location.href=o.outPath):e.$message.error(d);case 23:case"end":return t.stop()}}),t)})))()},onChangeTime:function(e){0===e.length||(this.date=[c()(e[0],"YYYY-MM-DD"),c()(e[1],"YYYY-MM-DD")]),this.getStatistics()},handleTableChange:function(e){this.getStatistics({pageIndex:e.current,pageSize:e.pageSize}),this.pagination.current=e.current,this.pagination.pageSize=e.pageSize},tabsChange:function(e){this.pagination.current=1,this.getStatistics(),this.getStatisticsPie()},getStatisticsPie:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,i,r,s,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a={year:c()().format("YYYY")},1!==t.activeKey){e.next=7;break}return e.next=4,Object(o["rb"])(a);case 4:e.t0=e.sent,e.next=17;break;case 7:if(2!==t.activeKey){e.next=13;break}return e.next=10,Object(o["Eb"])(a);case 10:e.t1=e.sent,e.next=16;break;case 13:return e.next=15,Object(o["M"])(a);case 15:e.t1=e.sent;case 16:e.t0=e.t1;case 17:n=e.t0,i=n.result,r=n.httpCode,s=n.message,console.log(i),200===r?3===t.activeKey?(l=[],i.monthNumbers.map((function(e){l.push({time:e.month,"数量":parseInt(e.number)})})),t.data1=l,console.log(l)):(t.normList=i.typeNumbers.map((function(e){return{item:1===t.activeKey?e.publicTypeName:e.typeName,count:e.number}})),t.pieList=i.stateNumbers.map((function(e){return{item:e.stateName,count:e.number}})),u=(new d.View).source(t.pieList),u.transform({type:"percent",field:"count",dimension:"item",as:"percent"}),t.data=u.rows):t.$message.error(s);case 23:case"end":return e.stop()}}),e)})))()},getStatistics:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i,r,s,l,d,u,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.loading=!0,n=t.pagination,i=n.current,r=n.defaultPageSize,s=Object.assign({},{pageIndex:i,pageSize:r,beginDate:c()(t.date[0]).format("YYYY-MM-DD"),endDate:c()(t.date[1]).format("YYYY-MM-DD")},e),1!==t.activeKey){a.next=9;break}return a.next=6,Object(o["pb"])(s);case 6:a.t0=a.sent,a.next=19;break;case 9:if(2!==t.activeKey){a.next=15;break}return a.next=12,Object(o["Db"])(s);case 12:a.t1=a.sent,a.next=18;break;case 15:return a.next=17,Object(o["Gb"])(s);case 17:a.t1=a.sent;case 18:a.t0=a.t1;case 19:l=a.t0,d=l.result,u=l.httpCode,p=l.message,200===u?(t.searchData=d.list,t.pagination.total=d.totalSize):t.$message.error(p),t.loading=!1;case 25:case"end":return a.stop()}}),a)})))()}}},Y=v,k=(a("2c14"),a("2877")),w=Object(k["a"])(Y,n,i,!1,null,"3d4ffd0d",null);t["default"]=w.exports}}]);