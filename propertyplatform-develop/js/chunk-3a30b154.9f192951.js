(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a30b154"],{"096a":function(e,t,a){"use strict";var r=a("8158"),s=a.n(r);s.a},"16a7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{style:{marginBottom:"20px"},attrs:{bordered:!1,"body-style":{paddingBottom:"0"}}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline",form:e.form},on:{submit:e.handleSubmit}},[0===e.activeKey?a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"报修名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!1,message:"请输入报修名称"}]}],expression:"[\n                  'title',\n                  {rules: [{ required: false, message: '请输入报修名称' }]}\n                ]"}],attrs:{placeholder:"请输入报修名称"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"报修时间"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["sysDate",{rules:[{required:!1,message:"请选择报修时间"}]}],expression:"['sysDate', {rules: [{required: false, message: '请选择报修时间'}]}]"}],staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD HH:mm:ss",placeholder:"请选择报修时间"}})],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-form-item",{attrs:{label:"状态"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["state",{rules:[{required:!1,message:"请选择状态"}]}],expression:"['state', {rules: [{ required: false, message: '请选择状态' }]}]"}],attrs:{placeholder:"请选择状态"}},[a("a-select-option",{key:1,attrs:{value:"NOT_COMPLETE"}},[e._v("已确认")]),a("a-select-option",{key:2,attrs:{value:"COMPLETE"}},[e._v("已完成")]),a("a-select-option",{key:3,attrs:{value:"MAINTENANCE"}},[e._v("维修中")])],1)],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-form-item",{attrs:{label:"分类"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!1,message:"请选择分类"}]}],expression:"[ 'type', {rules: [{ required: false, message: '请选择分类' }]}]"}],attrs:{placeholder:"请选择分类"}},[a("a-select-option",{key:1,attrs:{value:"HOME"}},[e._v("居家报修")]),a("a-select-option",{key:2,attrs:{value:"PUBLIC"}},[e._v("公共报修")])],1)],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary",htmlType:"submit"}},[e._v("搜索")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.handleReset}},[e._v("重置")])],1)])],1):e._e(),1===e.activeKey?a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"客户名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["people",{rules:[{required:!1,message:"请输入客户名称"}]}],expression:"[\n                  'people',\n                  {rules: [{ required: false, message: '请输入客户名称' }]}\n                ]"}],attrs:{placeholder:"请输入客户名称"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"跑腿时间"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["sysDate",{rules:[{required:!1,message:"请选择跑腿时间"}]}],expression:"['sysDate', {rules: [{required: false, message: '请选择跑腿时间'}]}]"}],staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD HH:mm:ss",placeholder:"请选择跑腿时间"}})],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-form-item",{attrs:{label:"状态"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["state",{rules:[{required:!1,message:"请选择状态"}]}],expression:"['state', {rules: [{ required: false, message: '请选择状态' }]}]"}],attrs:{placeholder:"请选择状态"}},[a("a-select-option",{key:1,attrs:{value:"NOT_TAKEN"}},[e._v("未取")]),a("a-select-option",{key:2,attrs:{value:"TAKEN"}},[e._v("已取")]),a("a-select-option",{key:3,attrs:{value:"TAKENING"}},[e._v("配送中")])],1)],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-form-item",{attrs:{label:"分类"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!1,message:"请选择分类"}]}],expression:"[ 'type', {rules: [{ required: false, message: '请选择分类' }]}]"}],attrs:{placeholder:"请选择分类"}},[a("a-select-option",{key:1,attrs:{value:"DELIVERY"}},[e._v("快递")]),a("a-select-option",{key:2,attrs:{value:"FOOD"}},[e._v("外卖")])],1)],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary",htmlType:"submit"}},[e._v("搜索")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.handleReset}},[e._v("重置")])],1)])],1):e._e(),2===e.activeKey?a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:5,sm:24}},[a("a-form-item",{attrs:{label:"物品名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!1,message:"请输入物品名称"}]}],expression:"[\n                  'name',\n                  {rules: [{ required: false, message: '请输入物品名称' }]}\n                ]"}],attrs:{placeholder:"请输入物品名称"}})],1)],1),a("a-col",{attrs:{md:5,sm:24}},[a("a-form-item",{attrs:{label:"客户名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["people",{rules:[{required:!1,message:"请输入客户名称"}]}],expression:"[\n                  'people',\n                  {rules: [{ required: false, message: '请输入客户名称' }]}\n                ]"}],attrs:{placeholder:"请输入客户名称"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"寄存时间"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["sysDate",{rules:[{required:!1,message:"请选择寄存时间"}]}],expression:"['sysDate', {rules: [{required: false, message: '请选择寄存时间'}]}]"}],staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD HH:mm:ss",placeholder:"请选择寄存时间"}})],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-form-item",{attrs:{label:"状态"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["state",{rules:[{required:!1,message:"请选择状态"}]}],expression:"['state', {rules: [{ required: false, message: '请选择状态' }]}]"}],attrs:{placeholder:"请选择状态"}},[a("a-select-option",{key:1,attrs:{value:"TRUSTEESHIP"}},[e._v("托管中")]),a("a-select-option",{key:2,attrs:{value:"RETRIEVE"}},[e._v("已取回")])],1)],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary",htmlType:"submit"}},[e._v("搜索")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.handleReset}},[e._v("重置")])],1)])],1):e._e()],1)],1)]),a("a-card",{attrs:{bordered:!1,"body-style":{padding:"0"}}},[a("div",{staticClass:"salesCard"},[a("a-tabs",{attrs:{size:"large","tab-bar-style":{marginBottom:"0",paddingLeft:"16px"}},on:{change:e.tabsChange},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("div",{staticClass:"extra-wrapper",attrs:{slot:"tabBarExtraContent"},slot:"tabBarExtraContent"},[a("div",{staticClass:"extra-item",on:{click:e.exportTable}},[a("a",[e._v("打印表格")])])]),a("a-tab-pane",{key:0,attrs:{loading:"true",tab:"报修管理"}},[a("a-row",{style:{padding:"20px"}},[a("a-table",{attrs:{loading:e.loading,columns:e.repairColumns,pagination:e.pagination,rowKey:"id",dataSource:e.data},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"avatar",fn:function(e){return a("span",{},[a("img",{style:{width:"80px",height:"80px"},attrs:{src:e,alt:""}})])}},{key:"action",fn:function(t){return a("span",{},[[a("a",{on:{click:function(a){return e.$refs.createModal.edit(t,5)}}},[e._v("分配")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(a){return e.allocationTap(t)}}},[e._v("抢单")])]],2)}}])})],1)],1),a("a-tab-pane",{key:1,attrs:{tab:"跑腿管理"}},[a("a-row",{style:{padding:"20px"}},[a("a-table",{attrs:{loading:e.loading,columns:e.errandsColumns,pagination:e.pagination,rowKey:"id",dataSource:e.data},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"avatar",fn:function(e){return a("span",{},[a("img",{style:{width:"80px",height:"80px"},attrs:{src:e,alt:""}})])}},{key:"action",fn:function(t){return a("span",{},[[a("a",{on:{click:function(a){return e.$refs.createModal.edit(t,6)}}},[e._v("分配")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(a){return e.allocationTap(t)}}},[e._v("抢单")])]],2)}}])})],1)],1),a("a-tab-pane",{key:2,attrs:{tab:"寄存管理"}},[a("a-row",{style:{padding:"20px"}},[a("a-table",{attrs:{loading:e.loading,columns:e.depositColumns,pagination:e.pagination,rowKey:"id",dataSource:e.data},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"avatar",fn:function(e){return a("span",{},[a("img",{style:{width:"80px",height:"80px"},attrs:{src:e,alt:""}})])}},{key:"action",fn:function(t){return a("span",{},[[a("a",{attrs:{disabled:"RETRIEVE"===t.state},on:{click:function(a){return e.retrieveTap(t)}}},[e._v("取回")])]],2)}}])})],1)],1)],1)],1)]),a("serve-add",{ref:"createModal",on:{ok:e.handleOk}})],1)},s=[],n=(a("d3b7"),a("25f0"),a("5530")),i=(a("96cf"),a("1da1")),o=a("c1df"),c=a.n(o),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:640,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-table",{attrs:{columns:e.columns,pagination:!1,rowKey:"id",dataSource:e.data,rowSelection:{type:"radio",selectedRowKeys:e.selectedRowKeys,onChange:this.onSelectChange}},scopedSlots:e._u([{key:"avatar",fn:function(e){return a("span",{},[a("img",{style:{width:"80px",height:"80px"},attrs:{src:e,alt:""}})])}},{key:"action",fn:function(t){return a("span",{},[[a("a",{on:{click:function(a){return e.$refs.createModal.edit(t)}}},[e._v("分配")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"}},[e._v("抢单")])]],2)}}])})],1)],1)},d=[],u=a("365c"),m=[{title:"姓名",key:"name",dataIndex:"name",align:"center"}],p={current:1,defaultPageSize:5,total:100,pageSizeOptions:["5","10","50","100"],showSizeChanger:!1,showQuickJumper:!1},g={data:function(){return{moment:c.a,visible:!1,confirmLoading:!1,form:this.$form.createForm(this),title:null,columns:m,data:[],pagination:p,selectedRowKeys:[],selectedRows:[],id:null}},methods:{add:function(){this.title="",this.visible=!0},edit:function(e,t){console.log(e),this.title="分配人员",this.visible=!0,this.selectedRowKeys=e.staffId||[],this.selectedRows=e.staffId||[],this.id=e.id,this.getList(t),this.$nextTick((function(){}))},handleSubmit:function(){var e=this;if(0===this.selectedRowKeys.length)return this.$message.error("请选择一名人员"),!1;this.confirmLoading=!0,setTimeout((function(){e.visible=!1,e.confirmLoading=!1,e.$emit("ok",{k:e.selectedRowKeys,c:e.id})}),1500)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},handleCancel:function(){this.visible=!1},getList:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s,n,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={roleId:e},a.next=3,Object(u["hb"])(r);case 3:s=a.sent,n=s.result,i=s.httpCode,o=s.message,200===i?t.data=n.staffs:t.$message.error(o);case 8:case"end":return a.stop()}}),a)})))()}}},f=g,v=a("2877"),h=Object(v["a"])(f,l,d,!1,null,null,null),b=h.exports,y=[{title:"报修名称",key:"title",dataIndex:"title",align:"center"},{title:"缩略图",key:"images",dataIndex:"images",scopedSlots:{customRender:"avatar"},align:"center"},{title:"报修详情",key:"content",dataIndex:"content",align:"center"},{title:"状态",key:"stateName",dataIndex:"stateName",align:"center"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},align:"center"}],x=[{title:"收货人",key:"people",dataIndex:"people",align:"center"},{title:"详情",key:"content",dataIndex:"content",align:"center"},{title:"状态",key:"stateName",dataIndex:"stateName",align:"center"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},align:"center"}],k=[{title:"收货人",key:"people",dataIndex:"people",align:"center"},{title:"缩略图",key:"images",dataIndex:"images",scopedSlots:{customRender:"avatar"},align:"center"},{title:"详情",key:"name",dataIndex:"name",align:"center"},{title:"状态",key:"stateName",dataIndex:"stateName",align:"center"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},align:"center"}],w={current:1,defaultPageSize:5,total:0,pageSizeOptions:["5","10","50","100"],showSizeChanger:!0,showQuickJumper:!0},S={name:"ServeList",components:{ServeAdd:b},data:function(){return{form:this.$form.createForm(this),activeKey:0,repairColumns:y,errandsColumns:x,depositColumns:k,data:[],pagination:w,loading:!1,date:[]}},created:function(){this.getList()},methods:{exportTable:function(){this.exportStatistics()},exportStatistics:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i,o,l,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.pagination,r=a.current,s=a.defaultPageSize,i=e.form.getFieldsValue().sysDate?Object(n["a"])(Object(n["a"])({pageIndex:r,pageSize:s},e.form.getFieldsValue()),{},{sysDate:c()(e.form.getFieldsValue().sysDate).format("YYYY-MM-DD HH:mm:ss")}):Object(n["a"])({pageIndex:r,pageSize:s},e.form.getFieldsValue()),0!==e.activeKey){t.next=8;break}return t.next=5,e.$exportExcel("serviceManagement/outRepairExcel",i);case 5:t.t0=t.sent,t.next=18;break;case 8:if(1!==e.activeKey){t.next=14;break}return t.next=11,e.$exportExcel("serviceManagement/outSubstituteExcel",i);case 11:t.t1=t.sent,t.next=17;break;case 14:return t.next=16,e.$exportExcel("serviceManagement/outTrusteeshipExcel",i);case 16:t.t1=t.sent;case 17:t.t0=t.t1;case 18:o=t.t0,l=o.result,d=o.httpCode,u=o.message,200===d?(console.log(l),window.location.href=l.outPath):e.$message.error(u);case 23:case"end":return t.stop()}}),t)})))()},retrieveTap:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["Fb"])({id:e.id});case 2:r=a.sent,s=r.httpCode,n=r.message,200===s?t.getList():t.$message.error(n);case 6:case"end":return a.stop()}}),a)})))()},handleOk:function(e){console.log(e),this.repairConfirm(e.k.toString(),e.c)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||(a.sysDate&&(a.sysDate=c()(a.sysDate).format("YYYY-MM-DD HH:mm:ss")),t.pagination.current=1,t.getList(a))}))},handleTableChange:function(e){this.getList({pageIndex:e.current,pageSize:e.pageSize}),this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,this.pagination.defaultPageSize=e.pageSize},handleReset:function(){this.form.resetFields(),this.getList(),this.pagination.current=1},tabsChange:function(e){this.getList()},allocationTap:function(e){this.betchStaff(e.id)},repairConfirm:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,n,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s={id:t,staffId:e},0!==a.activeKey){r.next=7;break}return r.next=4,Object(u["ob"])(s);case 4:r.t0=r.sent,r.next=10;break;case 7:return r.next=9,Object(u["Cb"])(s);case 9:r.t0=r.sent;case 10:n=r.t0,i=n.httpCode,o=n.message,200===i?(a.getList(),a.$message.success(o)):a.$message.success(o);case 14:case"end":return r.stop()}}),r)})))()},betchStaff:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={orderId:e,type:0===t.activeKey?"REPAIR":"SUBSTITUTE"},a.next=3,Object(u["sb"])(r);case 3:s=a.sent,n=s.httpCode,i=s.message,200===n?(t.getList(),t.$message.success(i)):t.$message.success(i);case 7:case"end":return a.stop()}}),a)})))()},getList:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s,i,o,c,l,d,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.loading=!0,r=t.pagination,s=r.current,i=r.defaultPageSize,o=Object.assign({},Object(n["a"])({pageIndex:s,pageSize:i},t.form.getFieldsValue()),e),0!==t.activeKey){a.next=9;break}return a.next=6,Object(u["qb"])(o);case 6:a.t0=a.sent,a.next=19;break;case 9:if(1!==t.activeKey){a.next=15;break}return a.next=12,Object(u["x"])(o);case 12:a.t1=a.sent,a.next=18;break;case 15:return a.next=17,Object(u["eb"])(o);case 17:a.t1=a.sent;case 18:a.t0=a.t1;case 19:c=a.t0,l=c.result,d=c.httpCode,m=c.message,200===d?(t.data=l.list,t.pagination.total=l.totalSize):t.$message.error(m),t.loading=!1;case 25:case"end":return a.stop()}}),a)})))()}}},C=S,R=(a("096a"),Object(v["a"])(C,r,s,!1,null,"46554651",null));t["default"]=R.exports},"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("d3b7"),a("e6cf");function r(e,t,a,r,s,n,i){try{var o=e[n](i),c=o.value}catch(l){return void a(l)}o.done?t(c):Promise.resolve(c).then(r,s)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(s,n){var i=e.apply(t,a);function o(e){r(i,s,n,o,c,"next",e)}function c(e){r(i,s,n,o,c,"throw",e)}o(void 0)}))}}},8158:function(e,t,a){}}]);