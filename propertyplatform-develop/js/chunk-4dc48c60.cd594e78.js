(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dc48c60"],{"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("d3b7"),a("e6cf");function n(t,e,a,n,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(n,r)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var s=t.apply(e,a);function o(t){n(s,r,i,o,c,"next",t)}function c(t){n(s,r,i,o,c,"throw",t)}o(void 0)}))}}},"21ee":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header-index-wide"},[a("a-card",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"缴费指标",bordered:!1}},[a("div",{staticClass:"row-top"},t._l(t.payList,(function(t,e){return a("div",{key:e},[a("head-info",{attrs:{title:t.payTypeName,content:t.totalMoney,bordered:4!==e}})],1)})),0),a("a-row",{attrs:{gutter:25}})],1),a("a-card",{attrs:{bordered:!1,"body-style":{padding:"0"}}},[a("div",{staticClass:"salesCard"},[a("a-tabs",{attrs:{size:"large","tab-bar-style":{marginBottom:"24px",paddingLeft:"16px"}},on:{change:t.tabsChange},model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},t._l(t.tabList,(function(e,n){return a("a-tab-pane",{key:e.type,attrs:{loading:"true",tab:e.name,index:n}},[a("a-row",[a("a-col",{attrs:{xl:8,lg:12,md:12,sm:24,xs:24}},[a("div",{staticClass:"rank",staticStyle:{padding:"50px 0 0 120px"}},[a("h3",{staticClass:"title"},[t._v("各项指标")]),a("ul",{staticClass:"list"},[a("li",[a("span",[a("em",[t._v("订单总数：")]),a("a-tag",{attrs:{color:"#3a8dff"}},[t._v(t._s(t.total.transactionNumber))])],1),a("span")]),t._l(t.data,(function(e,n){return a("li",{key:n},[a("span",[a("em",[t._v(t._s(e.payStateName)+"：")]),a("a-tag",{attrs:{color:"#3fc2c0"}},[t._v(t._s(e.transactionNumber))])],1),a("span")])})),a("li",[a("span",[a("em",[t._v("金额：")]),a("a-tag",{attrs:{color:"#ec4d6b"}},[t._v(t._s(t.total.totalMoney?t.total.totalMoney:0))])],1),a("span")])],2)])]),a("a-col",{attrs:{xl:16,lg:12,md:12,sm:24,xs:24}},[a("div",[a("v-chart",{attrs:{forceFit:!0,padding:[15,20,15,20],height:t.height,data:t.data,scale:t.scale}},[a("v-tooltip",{attrs:{showTitle:!1,"data-key":"payStateName*transactionNumber"}}),a("v-axis",{attrs:{title:{autoRotate:!0,text:"11111"}}}),a("v-legend",{attrs:{"data-key":"item",textStyle:{fontSize:"14"},position:"left-top",offsetX:140,offsetY:120}}),a("v-pie",{attrs:{position:"percent",color:t.color,vStyle:t.pieStyle,label:t.labelConfig}}),a("v-coord",{attrs:{type:"theta",radius:.75,innerRadius:.6}})],1)],1)])],1),a("a-row",{attrs:{gutter:24,type:"flex"}},[a("a-col",{attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("a-card",{style:{height:"100%"},attrs:{bordered:!1,title:""}},[a("a-range-picker",{style:{width:"256px"},attrs:{slot:"extra",value:t.date,format:"YYYY-MM-DD"},on:{change:t.onChangeTime},slot:"extra"}),a("a",{staticStyle:{"padding-left":"20px"},attrs:{slot:"extra"},on:{click:t.exportTable},slot:"extra"},[t._v("打印表格")]),a("div",{staticClass:"ant-table-wrapper"},[a("a-table",{attrs:{loading:t.loading,"row-key":"day",size:"small",columns:t.searchTableColumns,dataSource:t.searchData,pagination:t.pagination},on:{change:t.handleTableChange}})],1)],1)],1)],1)],1)})),1)],1)])],1)},r=[],i=(a("96cf"),a("1da1")),s=a("c1df"),o=a.n(s),c=a("365c"),l=a("81d1"),d=a("ac0d"),u=a("7104"),p=[{dataIndex:"day",title:"时间",align:"center"},{dataIndex:"transactionNumber",title:"订单总数",align:"center"},{dataIndex:"CANCEL",title:"作废数",align:"center"},{dataIndex:"PAID",title:"已支付数",align:"center"},{dataIndex:"STAY",title:"待支付数",align:"center"},{dataIndex:"totalMoney",title:"累计金额（元）",align:"center"}],g={current:1,defaultPageSize:5,total:0,pageSizeOptions:["5","10","50","100"],showSizeChanger:!0,showQuickJumper:!0},f=[{dataKey:"percent",min:0,formatter:".0%"}],m=["payStateName",["#3a8dff","#3fc2c0","#4bc464","#f9cc36","#ec4d6b","#8d98b3","#e5cf0d","#97b552"]],h=o()().subtract(1,"months").format("YYYY-MM-DD"),y=o()().format("YYYY-MM-DD"),b=[{name:"物业费",type:7},{name:"装修管理费",type:9},{name:"停车费",type:8},{name:"清洁费",type:10},{name:"物业维修基金",type:11}],v={name:"Society",mixins:[d["c"]],components:{HeadInfo:l["a"]},data:function(){return{loading:!1,searchTableColumns:p,searchData:[],pagination:g,data:[],date:[o()(h,"YYYY-MM-DD"),o()(y,"YYYY-MM-DD")],scale:f,color:m,height:400,pieStyle:{stroke:"#fff",lineWidth:1},labelConfig:["percent",{formatter:function(t,e){return e.point.payStateName+": "+t}}],payList:[],pieList:[],total:{},activeKey:b[0].type,tabList:b}},created:function(){this.getStatistics(),this.getStatisticsTotal(),this.getStatisticsPie()},mounted:function(){},methods:{exportTable:function(){this.exportStatistics()},exportStatistics:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,s,c,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.pagination,n=a.current,r=a.defaultPageSize,i={pageIndex:n,pageSize:r,beginDate:o()(t.date[0]).format("YYYY-MM-DD"),endDate:o()(t.date[1]).format("YYYY-MM-DD"),payTypeId:t.activeKey},e.next=4,t.$exportExcel("propertyStatistics/payDetailStatisticsToExcel",i);case 4:s=e.sent,c=s.result,l=s.httpCode,d=s.message,200===l?(console.log(c),window.location.href=c.outPath):t.$message.error(d);case 9:case"end":return e.stop()}}),e)})))()},onChangeTime:function(t){0===t.length||(this.date=[o()(t[0],"YYYY-MM-DD"),o()(t[1],"YYYY-MM-DD")]),this.getStatistics()},handleTableChange:function(t){this.getStatistics({pageIndex:t.current,pageSize:t.pageSize}),this.pagination.current=t.current,this.pagination.pageSize=t.pageSize},tabsChange:function(t){this.pagination.current=1,this.getStatistics(),this.getStatisticsPie()},getStatisticsTotal:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={year:o()().format("YYYY")},t.next=3,Object(c["Bb"])(a);case 3:n=t.sent,r=n.result,i=n.httpCode,s=n.message,200===i?e.payList=r.totalPropertyMoneys:e.$message.error(s),e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},getStatisticsPie:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={year:o()().format("YYYY"),payTypeId:e.activeKey},t.next=3,Object(c["Ab"])(a);case 3:n=t.sent,r=n.result,i=n.httpCode,s=n.message,200===i?(e.pieList=r.transactionNumberAndTotalMoney.states,e.total=r.transactionNumberAndTotalMoney.total,l=(new u.View).source(e.pieList),l.transform({type:"percent",field:"transactionNumber",dimension:"payStateName",as:"percent"}),e.data=l.rows):e.$message.error(s);case 8:case"end":return t.stop()}}),t)})))()},getStatistics:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,i,s,l,d,u,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,n=e.pagination,r=n.current,i=n.defaultPageSize,s=Object.assign({},{pageIndex:r,pageSize:i,beginDate:o()(e.date[0]).format("YYYY-MM-DD"),endDate:o()(e.date[1]).format("YYYY-MM-DD"),payTypeId:e.activeKey},t),a.next=5,Object(c["zb"])(s);case 5:l=a.sent,d=l.result,u=l.httpCode,p=l.message,200===u?(e.searchData=d.list,e.pagination.total=d.totalSize):e.$message.error(p),e.loading=!1;case 11:case"end":return a.stop()}}),a)})))()}}},Y=v,x=(a("dc8a"),a("2877")),S=Object(x["a"])(Y,n,r,!1,null,"03b2e1df",null);e["default"]=S.exports},"3d22":function(t,e,a){},5818:function(t,e,a){"use strict";var n=a("d751"),r=a.n(n);r.a},"81d1":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head-info",class:t.center&&"center"},[a("span",[t._v(t._s(t.title))]),a("p",[t._v(t._s(t.content))]),t.bordered?a("em"):t._e()])},r=[],i={name:"HeadInfo",props:{title:{type:String,default:""},content:{type:String,default:""},bordered:{type:Boolean,default:!1},center:{type:Boolean,default:!0}}},s=i,o=(a("5818"),a("2877")),c=Object(o["a"])(s,n,r,!1,null,"432d5786",null);e["a"]=c.exports},d751:function(t,e,a){},dc8a:function(t,e,a){"use strict";var n=a("3d22"),r=a.n(n);r.a}}]);