(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d68ff5e8"],{"01a6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{attrs:{bordered:!1,"body-style":{padding:"0"}}},[a("div",{staticClass:"salesCard"},[a("a-tabs",{attrs:{size:"large","tab-bar-style":{marginBottom:"0",paddingLeft:"16px"}},on:{change:e.tabsChange},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-tab-pane",{key:0,attrs:{loading:"true",tab:"社区申请"}},[a("a-row",{style:{padding:"20px"}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"社区名称","label-col":{span:3},"wrapper-col":{span:6}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["communityName",{rules:[{required:!0,message:"请输入小区名称"}]}],expression:"[\n                    'communityName',\n                    {\n                      rules: [{ required: true, message: '请输入小区名称' }]\n                    }\n                  ]"}],attrs:{placeholder:"请输入小区名称"}})],1),a("a-form-item",{attrs:{label:"小区所在地","label-col":{span:3},"wrapper-col":{span:6}}},[a("a-cascader",{directives:[{name:"decorator",rawName:"v-decorator",value:["city",{rules:[{required:!0,message:"请选择小区所在地"}]}],expression:"[\n                    'city',\n                    {\n                      rules: [{ required: true, message: '请选择小区所在地' }]\n                    }\n                  ]"}],attrs:{fieldNames:{label:"n",value:"v",children:"children"},options:e.city,placeholder:"请选择所属区域"},on:{change:e.onChange}})],1),a("a-form-item",{attrs:{label:"详细地址","label-col":{span:3},"wrapper-col":{span:6}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{rules:[{required:!0,message:"请输入详细地址"}]}],expression:"[\n                    'address',\n                    { rules: [{ required: true, message: '请输入详细地址' }] }\n                  ]"}],attrs:{rows:"4",placeholder:"请输入详细地址"}})],1),a("a-form-item",{attrs:{label:"公司名称","label-col":{span:3},"wrapper-col":{span:6}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["propertyName",{rules:[{required:!0,message:"请输入公司名称"}]}],expression:"[\n                    'propertyName',\n                    {\n                      rules: [{ required: true, message: '请输入公司名称' }]\n                    }\n                  ]"}],attrs:{placeholder:"请输入公司名称"}})],1),a("a-form-item",{attrs:{label:"公司营业执照","label-col":{span:3},"wrapper-col":{span:6}}},[a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{name:"file",action:e.UPLOAD_HOST,listType:"picture-card",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("上传图片")])],1):e._e()])],1)]),a("a-form-item",{attrs:{label:"法人信息","label-col":{span:3},"wrapper-col":{span:6}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["legalPerson",{rules:[{required:!0,message:"请输入法人姓名"}]}],expression:"[\n                    'legalPerson',\n                    {\n                      rules: [{ required: true, message: '请输入法人姓名' }]\n                    }\n                  ]"}],staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"法人姓名"}}),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["legalPersonId",{rules:[{required:!0,message:"请输入法人身份证号"}]}],expression:"[\n                    'legalPersonId',\n                    {\n                      rules: [\n                        { required: true, message: '请输入法人身份证号' }\n                      ]\n                    }\n                  ]"}],staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"法人身份证号"}}),a("div",{staticClass:"upload"},[a("div",{staticClass:"clearfix"},[a("span",[e._v("身份证正面")]),a("a-upload",{attrs:{name:"file",action:e.UPLOAD_HOST,listType:"picture-card",fileList:e.justList},on:{preview:e.handlePreview,change:function(t){return e.handleChangef(t,"just")}}},[e.justList.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("上传图片")])],1):e._e()])],1),a("div",{staticClass:"clearfix"},[a("span",[e._v("身份证正面")]),a("a-upload",{attrs:{name:"file",action:e.UPLOAD_HOST,listType:"picture-card",fileList:e.backList},on:{preview:e.handlePreview,change:function(t){return e.handleChangef(t,"back")}}},[e.backList.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("上传图片")])],1):e._e()])],1)])],1),a("a-form-item",{attrs:{label:"对公账号","label-col":{span:3},"wrapper-col":{span:6}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bank",{rules:[{required:!0,message:"请输入开户行"}]}],expression:"[\n                    'bank',\n                    {\n                      rules: [{ required: true, message: '请输入开户行' }]\n                    }\n                  ]"}],staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"开户行"}}),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bankAccount",{rules:[{required:!0,message:"请输入开户行账号"}]}],expression:"[\n                    'bankAccount',\n                    {\n                      rules: [{ required: true, message: '请输入开户行账号' }]\n                    }\n                  ]"}],staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"开户行账号"}})],1),a("a-form-item",{attrs:{label:"公司支付宝账号","label-col":{span:3},"wrapper-col":{span:6}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["aliPayAccount",{rules:[{required:!0,message:"请输入公司支付宝账号"}]}],expression:"[\n                    'aliPayAccount',\n                    {\n                      rules: [\n                        { required: true, message: '请输入公司支付宝账号' }\n                      ]\n                    }\n                  ]"}],attrs:{placeholder:"请输入公司支付宝账号"}})],1),a("a-form-item",{attrs:{label:"公司联系电话","label-col":{span:3},"wrapper-col":{span:6}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["telephone",{rules:[{required:!0,message:"请输入公司联系电话"}]}],expression:"[\n                    'telephone',\n                    {\n                      rules: [\n                        { required: true, message: '请输入公司联系电话' }\n                      ]\n                    }\n                  ]"}],attrs:{placeholder:"请输入公司联系电话"}})],1),a("a-form-item",[a("a-button",{style:{marginLeft:"160px"},attrs:{htmlType:"submit",type:"primary"}},[e._v("提交")])],1),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:function(t){e.previewVisible=!1}}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)],1)],1),a("a-tab-pane",{key:1,attrs:{tab:"状态列表"}},[a("a-row",{style:{padding:"20px"}},[a("a-table",{attrs:{loading:e.loading,columns:e.columns,pagination:e.pagination,rowKey:"id",dataSource:e.data},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"avatar",fn:function(e){return a("span",{},[a("img",{style:{width:"38px",height:"38px",borderRadius:"100px"},attrs:{src:e,alt:""}})])}},{key:"action",fn:function(t){return a("span",{},[["OUTAGE"===t.auditType?a("span",[e._v("停止")]):e._e(),"NOW"===t.auditType?a("span",[e._v("暂无")]):e._e(),"AUDITED"===t.auditType?a("a",{attrs:{disabled:t.id===e.userInfo.propertyId},on:{click:function(a){return e.switchTap(t)}}},[e._v("切换")]):e._e()]],2)}}])})],1)],1)],1)],1)])],1)},n=[],s=(a("d81d"),a("b0c0"),a("d3b7"),a("25f0"),a("2909")),i=(a("96cf"),a("1da1")),o=a("5530"),l=a("da71"),c=a("365c"),u=a("2f62"),d=[{title:"申请时间",key:"applyDate",dataIndex:"applyDate",align:"center"},{title:"物业公司名称",key:"propertyName",dataIndex:"propertyName",align:"center"},{title:"物业小区",key:"communityName",dataIndex:"communityName",align:"center"},{title:"公司法人",key:"legalPerson",dataIndex:"legalPerson",align:"center"},{title:"联系电话",key:"telephone",dataIndex:"telephone",align:"center"},{title:"状态",key:"stateName",dataIndex:"stateName",align:"center"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},align:"center"}],p={current:1,defaultPageSize:5,total:0,pageSizeOptions:["5","10","50","100"],showSizeChanger:!0,showQuickJumper:!0},m={name:"ProprietorList",components:{},data:function(){return{UPLOAD_HOST:l["d"],form:this.$form.createForm(this),activeKey:0,columns:d,data:[],pagination:p,loading:!1,fileList:[],previewVisible:!1,previewImage:null,city:[],justList:[],backList:[]}},computed:Object(o["a"])({},Object(u["c"])(["userInfo"])),created:function(){this.getList(),this.getAllAreas()},methods:Object(o["a"])(Object(o["a"])({},Object(u["b"])(["login","logout","setInfo"])),{},{onChange:function(e){console.log(e)},switchTap:function(e){this.getSwitchUser(e.id)},getSwitchUser:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["i"])({id:e});case 2:r=a.sent,n=r.result,s=r.httpCode,i=r.message,200===s?(t.login(n.token),t.setInfo({name:n.propertyName,avatar:n.propertyHeadUrl,propertyId:n.propertyId,staffId:n.staffId,menuList:n.functionList}),t.$message.success(i)):t.$message.error(i);case 7:case"end":return a.stop()}}),a)})))()},linkExecl:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["gb"])({});case 2:a=t.sent,r=a.result,n=a.httpCode,s=a.message,200===n?window.location.href=r.templateUrl:e.$message.error(s);case 7:case"end":return t.stop()}}),t)})))()},handleChangeFile:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?this.$message.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&this.$message.error("".concat(e.file.name," file upload failed."))},handleChangef:function(e,t){if("just"===t){var a=Object(s["a"])(e.fileList);a=a.map((function(e){return e.response&&(e.url=e.response.result.fileName),e})),this.justList=a}else{var r=Object(s["a"])(e.fileList);r=r.map((function(e){return e.response&&(e.url=e.response.result.fileName),e})),this.backList=r}},handleChange:function(e){var t=Object(s["a"])(e.fileList);t=t.map((function(e){return e.response&&(e.url=e.response.result.fileName),e})),this.fileList=t},handlePreview:function(e){this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||(a.imageZm=t.fileList.map((function(e){return e.url})).toString(),a.personImageZm=t.justList.map((function(e){return e.url})).toString(),a.personImageFm=t.backList.map((function(e){return e.url})).toString(),a.provinceId=a.city[0],a.cityId=a.city[1],a.areaId=a.city[2],a.sunlightPersonnelId=t.userInfo.staffId,t.setApply(a))}))},handleTableChange:function(e){this.getList({pageIndex:e.current,pageSize:e.pageSize}),this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,this.pagination.defaultPageSize=e.pageSize},handleReset:function(){this.form.resetFields()},tabsChange:function(e){0===e&&this.getList()},getAllAreas:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["db"])({});case 2:a=t.sent,r=a.result,n=a.httpCode,s=a.message,200===n?(i=JSON.parse(r.allAreas),e.city=i.p.map((function(e){var t={n:e.n,v:e.v,children:e.c.map((function(e){return{n:e.n,v:e.v,children:e.d}}))};return t}))):e.$message.error(s);case 7:case"end":return t.stop()}}),t)})))()},setApply:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["h"])(e);case 2:r=a.sent,n=r.result,s=r.httpCode,i=r.message,200===s?(console.log(n),t.$message.success(i)):t.$message.error(i);case 7:case"end":return a.stop()}}),a)})))()},getList:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o,l,u,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,r=t.pagination,n=r.current,s=r.defaultPageSize,i=Object.assign({},{pageIndex:n,pageSize:s,sunlightPersonnelId:t.userInfo.staffId},e),a.next=5,Object(c["g"])(i);case 5:o=a.sent,l=o.result,u=o.httpCode,d=o.message,200===u?(t.data=l.list,t.pagination.total=l.totalSize):t.$message.error(d),t.loading=!1;case 11:case"end":return a.stop()}}),a)})))()}})},f=m,g=(a("ad85"),a("2877")),h=Object(g["a"])(f,r,n,!1,null,"1c8de730",null);t["default"]=h.exports},1931:function(e,t,a){},"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("d3b7"),a("e6cf");function r(e,t,a,r,n,s,i){try{var o=e[s](i),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var i=e.apply(t,a);function o(e){r(i,n,s,o,l,"next",e)}function l(e){r(i,n,s,o,l,"throw",e)}o(void 0)}))}}},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("6b75");function n(e){if(Array.isArray(e))return Object(r["a"])(e)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function s(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var i=a("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return n(e)||s(e)||Object(i["a"])(e)||o()}},ad85:function(e,t,a){"use strict";var r=a("1931"),n=a.n(r);n.a}}]);